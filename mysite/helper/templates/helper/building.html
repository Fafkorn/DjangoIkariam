{% extends "base.html" %}

{% load static %}

{% block head %}
        <link rel="stylesheet" type="text/css" href="{% static 'helper/building.css' %}">
{% endblock %}

{% block content %}

{% load widget_tweaks %}

{% include "helper/navigation.html" %}


    <div class="container" >
        <div style="float: left">
            <div class="div-box">
                <img src="{{buildinginstance.building_type.image_path.url}}" alt="img">
            </div>
            <div class="div-box div-level">
                <div class="div-name">Poziom:</div>
                <hr>
                {{buildinginstance.level}}
            </div>

            <div class="div-box div-town">
                <div class="div-name">Miasto:</div>
                <hr>
                {{buildinginstance.building_town.town_name}}
            </div>

        </div>
        <div  style="float: left">
            <div class="div-box">
                <div class="div-title">
                    {{ buildinginstance.building_type.building_name }} {% if buildinginstance.is_upgraded %} (W budowie) {% endif %}
                </div>

                <hr class="my-hr">
                {{ buildinginstance.building_type.description }}
            </div>

            <div class="div-box">
                <form action="{% url 'helper:update_building' buildinginstance.id %}" method="post">
                {% csrf_token %}
                <input class="form-control building-level-input" type="number" value="{{buildinginstance.level}}" name="level" maxlength="2"/>
                <button class="btn btn-success confirm-button" type="submit">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-check-square" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                      <path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/>
                    </svg>
                </button>
            </form>

            {% if not buildinginstance.is_upgraded %}
            <form action="{% url 'helper:start_develop_building' buildinginstance.id %}" method="post">
                {% csrf_token %}
                <button class="btn btn-success" type="submit">Rozbuduj</button>
            </form>
            {% endif %}

            {% if buildinginstance.is_upgraded %}
            <form action="{% url 'helper:stop_develop_building' buildinginstance.id %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">Zakończ</button>
            </form>
            {% endif %}
            <a class="btn btn-success" href="{% url 'helper:user_buildings' buildinginstance.building_town.user.id %}">Wróc</a>

            </div>
        </div>

    </div>
{% endblock %}
